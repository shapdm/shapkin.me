<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Заметки на полях</title>
    <link>https://shapkin.me/</link>
    <description>Recent content on Заметки на полях</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright>
    <lastBuildDate>Mon, 24 Oct 2022 22:55:36 +0300</lastBuildDate><atom:link href="https://shapkin.me/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>VMware VCSA Certificates Expired</title>
      <link>https://shapkin.me/posts/vcsa-certificate-expired/</link>
      <pubDate>Mon, 24 Oct 2022 22:55:36 +0300</pubDate>
      
      <guid>https://shapkin.me/posts/vcsa-certificate-expired/</guid>
      <description>Внезапно VCSA 6.7 перестал авторизовывать, как доменного пользователя, так и локального администратора. После перезагрузки в web интерфейсе постоянно висела 503 ошибка:
503 Service Unavailable (Failed to connect to endpoint: [N7Vmacore4Http20NamedPipeServiceSpecE:0x00007f3d18008430] _serverNamespace = / action = Allow _pipeName =/var/run/vmware/vpxd-webserver-pipe)
Первым делом иду в логи, а именно /var/log/vmware/vpxd/vpxd.log и нахожу там следующие строки:
2022-10-24T14:37:37.776Z error vpxd[04614] [Originator@6876 sub=vmomi.soapStub[6630]] Resetting stub adapter for server &amp;lt;cs p:00007f9628783750, TCP:vcsa.domain.com:443&amp;gt; : service state request failed: N7Vmacore3Ssl18SSLVerifyExceptionE(SSL Exception: Verification parameters: --&amp;gt; PeerThumbprint: BA:E3:25:18:AB:62:50:74:62:A9:19:CF:DB:1C:85:FF:FA:77:E7:5B --&amp;gt; ExpectedThumbprint: --&amp;gt; ExpectedPeerName: vcsa.</description>
    </item>
    
    <item>
      <title>Блокировка исходящего трафика в Windows</title>
      <link>https://shapkin.me/posts/block-traffic-by-powershell/</link>
      <pubDate>Mon, 12 Sep 2022 12:18:47 +0300</pubDate>
      
      <guid>https://shapkin.me/posts/block-traffic-by-powershell/</guid>
      <description>Задача: Блокировать исходящий трафик, для тестирования функционала веб сервиса в браузере.
Решение: Блокировка исходящего трафика для браузера
New-NetFirewallRule -Program &amp;#34;C:\Program Files (x86)\Internet Explorer\iexplore.exe&amp;#34; -Action Block -Profile Any -DisplayName &amp;#34;block traffic&amp;#34; -RemoteAddress Internet -Direction Outbound Блокировка всего исходящего трафика
New-NetFirewallRule -Action Block -Profile Any -DisplayName &amp;#34;block traffic&amp;#34; -RemoteAddress Internet -Direction Outbound Удаление правила
Remove-NetFirewallRule -DisplayName &amp;#34;block traffic&amp;#34; Включение и отключение правила
Disable-NetFirewallRule -DisplayName &amp;#39;block traffic&amp;#39; Enable-NetFirewallRule -DisplayName &amp;#39;block traffic&amp;#39; Написал скрипт для удобства пользования</description>
    </item>
    
    <item>
      <title>Обо мне</title>
      <link>https://shapkin.me/about/</link>
      <pubDate>Sat, 27 Feb 2021 22:52:31 +0300</pubDate>
      
      <guid>https://shapkin.me/about/</guid>
      <description>Приветствую! Администрирую Windows/Linux/VMware ESXi
В блоге описываю актуальные для меня проблемы с решениями.
Данный блог является продолжением моего блога, который я вел на площадке blogger - https://shapkindmitry.blogspot.com.
Часть постов я перенес оттуда с сохранением даты публикации.</description>
    </item>
    
    <item>
      <title>Отключение IPv6 в CentOS 8</title>
      <link>https://shapkin.me/posts/disable-ipv6-in-centos8/</link>
      <pubDate>Wed, 03 Feb 2021 17:44:25 +0300</pubDate>
      
      <guid>https://shapkin.me/posts/disable-ipv6-in-centos8/</guid>
      <description>Есть несколько способов по отключению ipv6 в linux, через ядро, через настройки сетевого интерфейса, я же предпочитаю отключать в загрузчике GRUB.
Открываем /etc/default/grub и добавляем новой строкой следующее:
GRUB_CMDLINE_LINUX=&amp;#34;$GRUB_CMDLINE_LINUX ipv6.disable=1&amp;#34; Сохраняем и закрываем файл.
Теперь следует обновить конфиг grub.cfg, выполняем команду ls -la /etc/grub*.cfg и видим пути до 2х файлов:
/boot/grub2/grub.cfg /boot/efi/EFI/centos/grub.cfg Следующие 2 команды перегенерируют новые конфиги с учетом наших изменений:
grub2-mkconfig -o /boot/grub2/grub.cfg grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg Теперь остается перезагрузить наш сервер и проверить, что поддержка ipv6 действительно отключена для интерфейсов.</description>
    </item>
    
    <item>
      <title>Openvpn Certificate Verify Failed</title>
      <link>https://shapkin.me/posts/openvpn-certificate-verify-failed/</link>
      <pubDate>Mon, 25 Jan 2021 16:39:22 +0300</pubDate>
      
      <guid>https://shapkin.me/posts/openvpn-certificate-verify-failed/</guid>
      <description>Столкнулся с проблемой, удаленные клиенты не могут подключиться по OpenVPN.
В логе openvpn.log обнаружил следующее:
WARNING: Failed to stat CRL file, not (re)loading CRL. VERIFY ERROR: depth=0, error=CRL has expired: CN=client, serial=292462498369187844598607062130070224235 OpenSSL: error:1417C086:SSL routines:tls_process_client_certificate:certificate verify failed TLS_ERROR: BIO read tls_read_plaintext error TLS Error: TLS object -&amp;gt; incoming plaintext read error TLS Error: TLS handshake failed Fatal TLS error (check_tls_errors_co), restarting Ключевое, на что нужно обратить внимание, это WARNING: Failed to stat CRL file, not (re)loading CRL.</description>
    </item>
    
    <item>
      <title>Обновление и миграция Redmine между двумя серверами</title>
      <link>https://shapkin.me/posts/redmine-update-and-migrate/</link>
      <pubDate>Tue, 08 Dec 2020 19:41:15 +0300</pubDate>
      
      <guid>https://shapkin.me/posts/redmine-update-and-migrate/</guid>
      <description>Пришла пора обновить redmine с 3.4* версии до последней стабильной 4.1.1, при этом с переносом на другой сервер.
Старый сервер с Redmine CentOS 7 mysql 5.5 ruby 2.0 / rail 4.2 thin (gem сервер приложения) Новый сервер с Redmine CentOS 8 mariadb 10 ruby 2.6.5 / rails 5.2 thin (gem сервер приложения) Ниже опишу шаги, которые необходимо произвести, чтобы миграция прошла без проблем (в моем случае отработало без ошибок).
Установка нужной версии Redmine по инструкциям с сайта https://redmine.</description>
    </item>
    
    <item>
      <title>Acronis ломает загрузчик</title>
      <link>https://shapkin.me/posts/acronis-corrupts-linux-loader/</link>
      <pubDate>Tue, 22 Sep 2020 10:42:35 +0300</pubDate>
      
      <guid>https://shapkin.me/posts/acronis-corrupts-linux-loader/</guid>
      <description>Столкнулся с проблемой, подготовил систему с debian на борту и снял образ средствами Acronis True Image Home. Раскатал образ, а система не грузится, так как сектора не совпадают.
Восстановливаем загрузчик таким образом:
1. sudo mount /dev/sd*** /mnt 2. sudo mount /dev/sd** /mnt/boot/efi 3. for i in /dev /dev/pts /proc /sys /run; do sudo mount -B $i /mnt$i; done 4. sudo chroot /mnt 5. grub-install /dev/sd* 6. update-grub Обращаю внимание, что sd* = диск | sd** = efi партиция | sd*** = системная партиция Для определения партиций можно воспользоваться утилитой GParted (я грузился с GParted liveusb).</description>
    </item>
    
    <item>
      <title>Следим за процессом выполнения задачи</title>
      <link>https://shapkin.me/posts/watch-the-process/</link>
      <pubDate>Sun, 20 Mar 2016 09:43:33 +0300</pubDate>
      
      <guid>https://shapkin.me/posts/watch-the-process/</guid>
      <description>Открыл для себя замечательную утилиту (в linux) - pv (Pipe Viewer)
Пример использования pv dump.sql | mysql -u user -p password database </description>
    </item>
    
    <item>
      <title>Как заставить ESXi увидеть SSD хранилище</title>
      <link>https://shapkin.me/posts/activate-ssd-storage-in-esxi/</link>
      <pubDate>Sat, 05 Mar 2016 13:44:26 +0300</pubDate>
      
      <guid>https://shapkin.me/posts/activate-ssd-storage-in-esxi/</guid>
      <description>В ESXi 5.* и 6.* по-умолчанию все диски определяются как Non-SSD. Из за этого, например, не получится подключить SSD как кэширующее хранилище. Необходимо добавить правило в SATP (Storage Adapter Type Plugin). В Configuration - Storage - Datastore смотрим название диска. Заходим по ssh на хост, и вводим команду esxcli storage nmp satp rule add -s VMW_SATP_LOCAL -d mpx.vmhba1:C0:T1:L0 -o enable_ssd. В моем случае имя было mpx.vmhba1:C0:T1:L0. После этого вводим команду esxcli storage core claiming reclaim -d mpx.</description>
    </item>
    
    <item>
      <title>Поиск ключа лицензии Windows</title>
      <link>https://shapkin.me/posts/find-out-the-windows-built-in-license/</link>
      <pubDate>Thu, 10 Dec 2015 08:46:09 +0300</pubDate>
      
      <guid>https://shapkin.me/posts/find-out-the-windows-built-in-license/</guid>
      <description>На новом ноутбуке стояла Windows 8.1, обновили до 10. После установки необходимого софта и обновлений, склонировал образ на другие идентичные ноутбуки.
Встал вопрос с активацией. Нашел способы, как узнать ключ системы.
Получаем OEM ключ из UEFI Если у нас предустановлена система и нам нужен ее ключ, то тут достаточно одной команды в командной строке (!):
wmic path softwarelicensingservice get OA3xOriginalProductKey
Получаем ключ установленной системы Используем PowerShell скрипт (простой команды в данном случае, к сожалению, не предусмотрено).</description>
    </item>
    
  </channel>
</rss>
